; This translation of the first test case to SMT2LIB as generated by ChatGPT.
; Neither int-blasting nor bit-blasting solvers can solve this problem? Can we?
; (there is also a manually int-blasted variant, apparently that one is also hard)

(set-logic QF_BV)

; Declare 64-bit bitvector variables
(declare-fun v1 () (_ BitVec 64))
(declare-fun v2 () (_ BitVec 64))
(declare-fun v3 () (_ BitVec 64))
(declare-fun v4 () (_ BitVec 64))

; Assert original equations over Z/2^64Z
; Equation 1: 12345678901234*v1 + 98765432109876*v2 + 45678901234567*v3 + 78901234567890 == 0
(assert (= 
  (bvadd
    (bvmul (_ bv12345678901234 64) v1)
    (bvadd 
      (bvmul (_ bv98765432109876 64) v2)
      (bvadd 
        (bvmul (_ bv45678901234567 64) v3)
        (_ bv78901234567890 64))))
  (_ bv0 64)))

; Equation 2: 55555555555555*v1 + 77777777777777*v2 + 33333333333333*v4 + 11111111111111 == 0
(assert (= 
  (bvadd
    (bvmul (_ bv55555555555555 64) v1)
    (bvadd 
      (bvmul (_ bv77777777777777 64) v2)
      (bvadd 
        (bvmul (_ bv33333333333333 64) v4)
        (_ bv11111111111111 64))))
  (_ bv0 64)))

; Equation 3: 99999999999999*v1 + 88888888888888*v3 + 66666666666666*v4 + 44444444444444 == 0
(assert (= 
  (bvadd
    (bvmul (_ bv99999999999999 64) v1)
    (bvadd 
      (bvmul (_ bv88888888888888 64) v3)
      (bvadd 
        (bvmul (_ bv66666666666666 64) v4)
        (_ bv44444444444444 64))))
  (_ bv0 64)))

; --- Check derived equations are implied by originals ---

; Derived equation 1: v4 = 12597058849815457749*v2 + 11030395062240253015
(assert (distinct 
  v4 
  (bvadd 
    (bvmul (_ bv12597058849815457749 64) v2) 
    (_ bv11030395062240253015 64))))

(check-sat)
