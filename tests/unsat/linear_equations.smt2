;; A system of bitvector equations generated by ChatGPT. x1 end up being equal to x2 here, but
;; it takes 6 seconds for Z3 to figure this out.
(set-logic QF_BV)

;; declare eight 512-bit bitvector variables x1 through x8
(declare-fun x1 () (_ BitVec 512))
(declare-fun x2 () (_ BitVec 512))
(declare-fun x3 () (_ BitVec 512))
(declare-fun x4 () (_ BitVec 512))
(declare-fun x5 () (_ BitVec 512))
(declare-fun x6 () (_ BitVec 512))
(declare-fun x7 () (_ BitVec 512))
(declare-fun x8 () (_ BitVec 512))

;; Equation (1): 5*x1 + 11*x2 + 7*x3 + 2*x5 ≡ 4 (mod 16)
(assert
  (= 
    (bvadd 
      (bvadd 
        (bvadd (bvmul (_ bv5 512) x1) (bvmul (_ bv11 512) x2))
        (bvmul (_ bv7 512) x3))
      (bvmul (_ bv2 512) x5))
    (_ bv4 512)
  )
)

;; Equation (2): 3*x1 + 13*x2 + 4*x4 + 9*x6 ≡ 10 (mod 16)
(assert
  (=  
    (bvadd
      (bvadd
        (bvadd (bvmul (_ bv3 512) x1) (bvmul (_ bv13 512) x2))
        (bvmul (_ bv4 512) x4))
      (bvmul (_ bv9 512) x6))
    (_ bv10 512)
  )
)

;; Equation (3): 7*x1 + 9*x2 + 5*x3 + 12*x7 ≡ 6 (mod 16)
(assert
  (=  
    (bvadd
      (bvadd
        (bvadd (bvmul (_ bv7 512) x1) (bvmul (_ bv9 512) x2))
        (bvmul (_ bv5 512) x3))
      (bvmul (_ bv12 512) x7))
    (_ bv6 512)
  )
)

;; Equation (4): 2*x1 + 14*x2 + 3*x5 + 11*x8 ≡ 8 (mod 16)
(assert
  (= 
    (bvadd
      (bvadd
        (bvadd (bvmul (_ bv2 512) x1) (bvmul (_ bv14 512) x2))
        (bvmul (_ bv3 512) x5))
      (bvmul (_ bv11 512) x8))
    (_ bv8 512)
  )
)

;; Equation (5): 6*x1 + 10*x2 + 1*x4 + 13*x6 ≡ 12 (mod 16)
(assert
  (= 
    (bvadd
      (bvadd
        (bvadd (bvmul (_ bv6 512) x1) (bvmul (_ bv10 512) x2))
        (bvmul (_ bv1 512) x4))
      (bvmul (_ bv13 512) x6))
    (_ bv12 512)
  )
)

;; Equation (6): 8*x1 + 8*x2 + 2*x7 + 5*x3 ≡ 14 (mod 16)
(assert
  (= 
    (bvadd
      (bvadd
        (bvadd (bvmul (_ bv8 512) x1) (bvmul (_ bv8 512) x2))
        (bvmul (_ bv2 512) x7))
      (bvmul (_ bv5 512) x3))
    (_ bv14 512)
  )
)

;; Equation (7): 4*x1 + 12*x2 + 6*x5 + 3*x8 ≡ 2 (mod 16)
(assert
  (= 
    (bvadd
      (bvadd
        (bvadd (bvmul (_ bv4 512) x1) (bvmul (_ bv12 512) x2))
        (bvmul (_ bv6 512) x5))
      (bvmul (_ bv3 512) x8))
    (_ bv2 512)
  )
)

;; Finally assert that x1 and x2 are distinct
(assert (distinct x1 x2))

;; Check satisfiability and, if sat, get a model
(check-sat)
